{"ast":null,"code":"import _defineProperty from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import Form from\"react-bootstrap/Form\";import Alert from\"react-bootstrap/Alert\";import Button from\"react-bootstrap/Button\";import Col from\"react-bootstrap/Col\";import Row from\"react-bootstrap/Row\";import Image from\"react-bootstrap/Image\";import Container from\"react-bootstrap/Container\";import{Link,useHistory}from\"react-router-dom\";import styles from\"../../styles/SignInUpForm.module.css\";import btnStyles from\"../../styles/Button.module.css\";import appStyles from\"../../App.module.css\";import{useSetCurrentUser}from\"../../contexts/CurrentUserContext\";import{useRedirect}from\"../../hooks/useRedirect\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignInForm(){var _errors$username,_errors$password,_errors$non_field_err;var setCurrentUser=useSetCurrentUser();useRedirect(\"loggedIn\");var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),signInData=_useState2[0],setSignInData=_useState2[1];var username=signInData.username,password=signInData.password;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$axios$post,data,_err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"/dj-rest-auth/login/\",signInData);case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setCurrentUser(data.user);history.goBack();_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setErrors((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.data);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(event){setSignInData(_objectSpread(_objectSpread({},signInData),{},_defineProperty({},event.target.name,event.target.value)));};return/*#__PURE__*/_jsxs(Row,{className:styles.Row,children:[/*#__PURE__*/_jsxs(Col,{className:\"my-auto p-0 p-md-2\",md:6,children:[/*#__PURE__*/_jsxs(Container,{className:\"\".concat(appStyles.Content,\" p-4 \"),children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.Header,children:\"sign in\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"username\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"d-none\",children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Username\",name:\"username\",className:styles.Input,value:username,onChange:handleChange})]}),(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"d-none\",children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",className:styles.Input,value:password,onChange:handleChange})]}),(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsx(Button,{className:\"\".concat(btnStyles.Button,\" \").concat(btnStyles.Wide,\" \").concat(btnStyles.Bright),type:\"submit\",children:\"Sign in\"}),(_errors$non_field_err=errors.non_field_errors)===null||_errors$non_field_err===void 0?void 0:_errors$non_field_err.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",className:\"mt-3\",children:message},idx);})]})]}),/*#__PURE__*/_jsx(Container,{className:\"mt-3 \".concat(appStyles.Content),children:/*#__PURE__*/_jsxs(Link,{className:styles.Link,to:\"/signup\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"span\",{children:\"Sign up now!\"})]})})]}),/*#__PURE__*/_jsx(Col,{md:6,className:\"my-auto d-none d-md-block p-2 \".concat(styles.SignInCol),children:/*#__PURE__*/_jsx(Image,{className:\"\".concat(appStyles.FillerImage),src:\"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero.jpg\"})})]});}export default SignInForm;","map":{"version":3,"names":["React","useState","axios","Form","Alert","Button","Col","Row","Image","Container","Link","useHistory","styles","btnStyles","appStyles","useSetCurrentUser","useRedirect","jsx","_jsx","jsxs","_jsxs","SignInForm","_errors$username","_errors$password","_errors$non_field_err","setCurrentUser","_useState","username","password","_useState2","_slicedToArray","signInData","setSignInData","_useState3","_useState4","errors","setErrors","history","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","_yield$axios$post","data","_err$response","wrap","_callee$","_context","prev","next","preventDefault","post","sent","user","goBack","t0","response","stop","_x","apply","arguments","handleChange","_objectSpread","_defineProperty","target","name","value","className","children","md","concat","Content","Header","onSubmit","Group","controlId","Label","Control","type","placeholder","Input","onChange","map","message","idx","variant","Wide","Bright","non_field_errors","to","SignInCol","FillerImage","src"],"sources":["/workspace/api-django/project/frontend/src/pages/auth/SignInForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Image from \"react-bootstrap/Image\";\nimport Container from \"react-bootstrap/Container\";\n\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport styles from \"../../styles/SignInUpForm.module.css\";\nimport btnStyles from \"../../styles/Button.module.css\";\nimport appStyles from \"../../App.module.css\";\nimport { useSetCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport { useRedirect } from \"../../hooks/useRedirect\";\n\nfunction SignInForm() {\n  const setCurrentUser = useSetCurrentUser();\n  useRedirect(\"loggedIn\");\n\n  const [signInData, setSignInData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n  const { username, password } = signInData;\n\n  const [errors, setErrors] = useState({});\n\n  const history = useHistory();\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      const { data } = await axios.post(\"/dj-rest-auth/login/\", signInData);\n      setCurrentUser(data.user);\n      history.goBack();\n    } catch (err) {\n      setErrors(err.response?.data);\n    }\n  };\n\n  const handleChange = (event) => {\n    setSignInData({\n      ...signInData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  return (\n    <Row className={styles.Row}>\n      <Col className=\"my-auto p-0 p-md-2\" md={6}>\n        <Container className={`${appStyles.Content} p-4 `}>\n          <h1 className={styles.Header}>sign in</h1>\n          <Form onSubmit={handleSubmit}>\n            <Form.Group controlId=\"username\">\n              <Form.Label className=\"d-none\">Username</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Username\"\n                name=\"username\"\n                className={styles.Input}\n                value={username}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.username?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n\n            <Form.Group controlId=\"password\">\n              <Form.Label className=\"d-none\">Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password\"\n                className={styles.Input}\n                value={password}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.password?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n            <Button\n              className={`${btnStyles.Button} ${btnStyles.Wide} ${btnStyles.Bright}`}\n              type=\"submit\"\n            >\n              Sign in\n            </Button>\n            {errors.non_field_errors?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\" className=\"mt-3\">\n                {message}\n              </Alert>\n            ))}\n          </Form>\n        </Container>\n        <Container className={`mt-3 ${appStyles.Content}`}>\n          <Link className={styles.Link} to=\"/signup\">\n            Don't have an account? <span>Sign up now!</span>\n          </Link>\n        </Container>\n      </Col>\n      <Col\n        md={6}\n        className={`my-auto d-none d-md-block p-2 ${styles.SignInCol}`}\n      >\n        <Image\n          className={`${appStyles.FillerImage}`}\n          src={\"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero.jpg\"}\n        />\n      </Col>\n    </Row>\n  );\n}\n\nexport default SignInForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}