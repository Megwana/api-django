{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Alert from\"react-bootstrap/Alert\";import Button from\"react-bootstrap/Button\";import Container from\"react-bootstrap/Container\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import Form from\"react-bootstrap/Form\";import{useHistory,useParams}from\"react-router-dom\";import{axiosRes}from\"../../api/axiosDefaults\";import{useCurrentUser}from\"../../contexts/CurrentUserContext\";import btnStyles from\"../../styles/Button.module.css\";import appStyles from\"../../App.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserPasswordForm=function UserPasswordForm(){var _errors$new_password,_errors$new_password2;var history=useHistory();var _useParams=useParams(),id=_useParams.id;var currentUser=useCurrentUser();var _useState=useState({new_password1:\"\",new_password2:\"\"}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var new_password1=userData.new_password1,new_password2=userData.new_password2;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var handleChange=function handleChange(event){setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},event.target.name,event.target.value)));};useEffect(function(){var _currentUser$profile_;if((currentUser===null||currentUser===void 0?void 0:(_currentUser$profile_=currentUser.profile_id)===null||_currentUser$profile_===void 0?void 0:_currentUser$profile_.toString())!==id){// redirect user if they are not the owner of this profile\nhistory.push(\"/\");}},[currentUser,history,id]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axiosRes.post(\"/dj-rest-auth/password/change/\",userData);case 4:history.goBack();_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setErrors((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.data);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,7]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"py-2 mx-auto text-center\",md:6,children:/*#__PURE__*/_jsx(Container,{className:appStyles.Content,children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"New password\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"new password\",type:\"password\",value:new_password1,onChange:handleChange,name:\"new_password1\"})]}),errors===null||errors===void 0?void 0:(_errors$new_password=errors.new_password1)===null||_errors$new_password===void 0?void 0:_errors$new_password.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm password\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"confirm new password\",type:\"password\",value:new_password2,onChange:handleChange,name:\"new_password2\"})]}),errors===null||errors===void 0?void 0:(_errors$new_password2=errors.new_password2)===null||_errors$new_password2===void 0?void 0:_errors$new_password2.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsx(Button,{className:\"\".concat(btnStyles.Button,\" \").concat(btnStyles.Blue),onClick:function onClick(){return history.goBack();},children:\"cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"\".concat(btnStyles.Button,\" \").concat(btnStyles.Blue),children:\"save\"})]})})})});};export default UserPasswordForm;","map":{"version":3,"names":["React","useEffect","useState","Alert","Button","Container","Row","Col","Form","useHistory","useParams","axiosRes","useCurrentUser","btnStyles","appStyles","jsx","_jsx","jsxs","_jsxs","UserPasswordForm","_errors$new_password","_errors$new_password2","history","_useParams","id","currentUser","_useState","new_password1","new_password2","_useState2","_slicedToArray","userData","setUserData","_useState3","_useState4","errors","setErrors","handleChange","event","_objectSpread","_defineProperty","target","name","value","_currentUser$profile_","profile_id","toString","push","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_err$response","wrap","_callee$","_context","prev","next","preventDefault","post","goBack","t0","console","log","response","data","stop","_x","apply","arguments","children","className","md","Content","onSubmit","Group","Label","Control","placeholder","type","onChange","map","message","idx","variant","concat","Blue","onClick"],"sources":["/workspace/api-django/project/frontend/src/pages/profiles/UserPasswordForm.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport Alert from \"react-bootstrap/Alert\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from \"react-bootstrap/Form\";\n\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { axiosRes } from \"../../api/axiosDefaults\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\n\nimport btnStyles from \"../../styles/Button.module.css\";\nimport appStyles from \"../../App.module.css\";\n\nconst UserPasswordForm = () => {\n  const history = useHistory();\n  const { id } = useParams();\n  const currentUser = useCurrentUser();\n\n  const [userData, setUserData] = useState({\n    new_password1: \"\",\n    new_password2: \"\",\n  });\n  const { new_password1, new_password2 } = userData;\n\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (event) => {\n    setUserData({\n      ...userData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  useEffect(() => {\n    if (currentUser?.profile_id?.toString() !== id) {\n      // redirect user if they are not the owner of this profile\n      history.push(\"/\");\n    }\n  }, [currentUser, history, id]);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      await axiosRes.post(\"/dj-rest-auth/password/change/\", userData);\n      history.goBack();\n    } catch (err) {\n      console.log(err);\n      setErrors(err.response?.data);\n    }\n  };\n\n  return (\n    <Row>\n      <Col className=\"py-2 mx-auto text-center\" md={6}>\n        <Container className={appStyles.Content}>\n          <Form onSubmit={handleSubmit}>\n            <Form.Group>\n              <Form.Label>New password</Form.Label>\n              <Form.Control\n                placeholder=\"new password\"\n                type=\"password\"\n                value={new_password1}\n                onChange={handleChange}\n                name=\"new_password1\"\n              />\n            </Form.Group>\n            {errors?.new_password1?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n            <Form.Group>\n              <Form.Label>Confirm password</Form.Label>\n              <Form.Control\n                placeholder=\"confirm new password\"\n                type=\"password\"\n                value={new_password2}\n                onChange={handleChange}\n                name=\"new_password2\"\n              />\n            </Form.Group>\n            {errors?.new_password2?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n            <Button\n              className={`${btnStyles.Button} ${btnStyles.Blue}`}\n              onClick={() => history.goBack()}\n            >\n              cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              className={`${btnStyles.Button} ${btnStyles.Blue}`}\n            >\n              save\n            </Button>\n          </Form>\n        </Container>\n      </Col>\n    </Row>\n  );\n};\n\nexport default UserPasswordForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}