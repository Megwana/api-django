{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{axiosReq}from\"../api/axiosDefaults\";export var fetchMoreData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(resource,setResource){var _yield$axiosReq$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosReq.get(resource.next);case 3:_yield$axiosReq$get=_context.sent;data=_yield$axiosReq$get.data;setResource(function(prevResource){return _objectSpread(_objectSpread({},prevResource),{},{next:data.next,results:data.results.reduce(function(acc,cur){return acc.some(function(accResult){return accResult.id===cur.id;})?acc:[].concat(_toConsumableArray(acc),[cur]);},prevResource.results)});});_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchMoreData(_x,_x2){return _ref.apply(this,arguments);};}();export var followHelper=function followHelper(profile,clickedProfile,following_id){return profile.id===clickedProfile.id?// This is the profile I clicked on,\n// update its followers count and set its following id\n_objectSpread(_objectSpread({},profile),{},{followers_count:profile.followers_count+1,following_id:following_id}):profile.is_owner?// This is the profile of the logged in user\n// update its following count\n_objectSpread(_objectSpread({},profile),{},{following_count:profile.following_count+1}):// this is not the profile the user clicked on or the profile\n// the user owns, so just return it unchanged\nprofile;};export var unfollowHelper=function unfollowHelper(profile,clickedProfile){return profile.id===clickedProfile.id?// This is the profile I clicked on,\n// update its followers count and set its following id\n_objectSpread(_objectSpread({},profile),{},{followers_count:profile.followers_count-1,following_id:null}):profile.is_owner?// This is the profile of the logged in user\n// update its following count\n_objectSpread(_objectSpread({},profile),{},{following_count:profile.following_count-1}):// this is not the profile the user clicked on or the profile\n// the user owns, so just return it unchanged\nprofile;};","map":{"version":3,"names":["axiosReq","fetchMoreData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resource","setResource","_yield$axiosReq$get","data","wrap","_callee$","_context","prev","next","get","sent","prevResource","_objectSpread","results","reduce","acc","cur","some","accResult","id","concat","_toConsumableArray","t0","stop","_x","_x2","apply","arguments","followHelper","profile","clickedProfile","following_id","followers_count","is_owner","following_count","unfollowHelper"],"sources":["/workspace/api-django/project/frontend/src/utils/utils.js"],"sourcesContent":["import { axiosReq } from \"../api/axiosDefaults\";\n\nexport const fetchMoreData = async (resource, setResource) => {\n  try {\n    const { data } = await axiosReq.get(resource.next);\n    setResource((prevResource) => ({\n      ...prevResource,\n      next: data.next,\n      results: data.results.reduce((acc, cur) => {\n        return acc.some((accResult) => accResult.id === cur.id)\n          ? acc\n          : [...acc, cur];\n      }, prevResource.results),\n    }));\n  } catch (err) {}\n};\n\nexport const followHelper = (profile, clickedProfile, following_id) => {\n  return profile.id === clickedProfile.id\n    ? // This is the profile I clicked on,\n      // update its followers count and set its following id\n      {\n        ...profile,\n        followers_count: profile.followers_count + 1,\n        following_id,\n      }\n    : profile.is_owner\n    ? // This is the profile of the logged in user\n      // update its following count\n      { ...profile, following_count: profile.following_count + 1 }\n    : // this is not the profile the user clicked on or the profile\n      // the user owns, so just return it unchanged\n      profile;\n};\n\nexport const unfollowHelper = (profile, clickedProfile) => {\n  return profile.id === clickedProfile.id\n    ? // This is the profile I clicked on,\n      // update its followers count and set its following id\n      {\n        ...profile,\n        followers_count: profile.followers_count - 1,\n        following_id: null,\n      }\n    : profile.is_owner\n    ? // This is the profile of the logged in user\n      // update its following count\n      { ...profile, following_count: profile.following_count - 1 }\n    : // this is not the profile the user clicked on or the profile\n      // the user owns, so just return it unchanged\n      profile;\n};"],"mappings":"ugBAAA,OAASA,QAAQ,KAAQ,sBAAsB,CAE/C,MAAO,IAAM,CAAAC,aAAa,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,QAAQ,CAAEC,WAAW,MAAAC,mBAAA,CAAAC,IAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAE9B,CAAAf,QAAQ,CAACgB,GAAG,CAACT,QAAQ,CAACQ,IAAI,CAAC,QAAAN,mBAAA,CAAAI,QAAA,CAAAI,IAAA,CAA1CP,IAAI,CAAAD,mBAAA,CAAJC,IAAI,CACZF,WAAW,CAAC,SAACU,YAAY,SAAAC,aAAA,CAAAA,aAAA,IACpBD,YAAY,MACfH,IAAI,CAAEL,IAAI,CAACK,IAAI,CACfK,OAAO,CAAEV,IAAI,CAACU,OAAO,CAACC,MAAM,CAAC,SAACC,GAAG,CAAEC,GAAG,CAAK,CACzC,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,SAACC,SAAS,QAAK,CAAAA,SAAS,CAACC,EAAE,GAAKH,GAAG,CAACG,EAAE,GAAC,CACnDJ,GAAG,IAAAK,MAAA,CAAAC,kBAAA,CACCN,GAAG,GAAEC,GAAG,EAAC,CACnB,CAAC,CAAEL,YAAY,CAACE,OAAO,CAAC,IACxB,CAAC,CAACP,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAgB,EAAA,CAAAhB,QAAA,sCAAAA,QAAA,CAAAiB,IAAA,MAAAxB,OAAA,gBAEP,kBAbY,CAAAL,aAAaA,CAAA8B,EAAA,CAAAC,GAAA,SAAA9B,IAAA,CAAA+B,KAAA,MAAAC,SAAA,OAazB,CAED,MAAO,IAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,OAAO,CAAEC,cAAc,CAAEC,YAAY,CAAK,CACrE,MAAO,CAAAF,OAAO,CAACV,EAAE,GAAKW,cAAc,CAACX,EAAE,CACnC;AACA;AAAAP,aAAA,CAAAA,aAAA,IAEKiB,OAAO,MACVG,eAAe,CAAEH,OAAO,CAACG,eAAe,CAAG,CAAC,CAC5CD,YAAY,CAAZA,YAAY,GAEdF,OAAO,CAACI,QAAQ,CAChB;AACA;AAAArB,aAAA,CAAAA,aAAA,IACKiB,OAAO,MAAEK,eAAe,CAAEL,OAAO,CAACK,eAAe,CAAG,CAAC,GAC1D;AACA;AACAL,OAAO,CACb,CAAC,CAED,MAAO,IAAM,CAAAM,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIN,OAAO,CAAEC,cAAc,CAAK,CACzD,MAAO,CAAAD,OAAO,CAACV,EAAE,GAAKW,cAAc,CAACX,EAAE,CACnC;AACA;AAAAP,aAAA,CAAAA,aAAA,IAEKiB,OAAO,MACVG,eAAe,CAAEH,OAAO,CAACG,eAAe,CAAG,CAAC,CAC5CD,YAAY,CAAE,IAAI,GAEpBF,OAAO,CAACI,QAAQ,CAChB;AACA;AAAArB,aAAA,CAAAA,aAAA,IACKiB,OAAO,MAAEK,eAAe,CAAEL,OAAO,CAACK,eAAe,CAAG,CAAC,GAC1D;AACA;AACAL,OAAO,CACb,CAAC"},"metadata":{},"sourceType":"module"}