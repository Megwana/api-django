{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/api-django/project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{Navbar,Container,Nav}from\"react-bootstrap\";import logo from\"../assets/logo.png\";import styles from\"../styles/NavBar.module.css\";import{NavLink}from\"react-router-dom\";import{useCurrentUser,useSetCurrentUser}from\"../contexts/CurrentUserContext\";import Avatar from\"./Avatar\";import axios from\"axios\";import useClickOutsideToggle from\"../hooks/useClickOutsideToggle\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NavBar=function NavBar(){var currentUser=useCurrentUser();var setCurrentUser=useSetCurrentUser();var _useClickOutsideToggl=useClickOutsideToggle(),expanded=_useClickOutsideToggl.expanded,setExpanded=_useClickOutsideToggl.setExpanded,ref=_useClickOutsideToggl.ref;var handleSignOut=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"dj-rest-auth/logout/\");case 3:setCurrentUser(null);_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function handleSignOut(){return _ref.apply(this,arguments);};}();var addPostIcon=/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/posts/create\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-plus-square\"}),\"Add post\"]});var loggedInIcons=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/feed\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-stream\"}),\"Feed\"]}),/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/liked\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-heart\"}),\"Liked\"]}),/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,to:\"/\",onClick:handleSignOut,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-out-alt\"}),\"Sign out\"]}),/*#__PURE__*/_jsx(NavLink,{className:styles.NavLink,to:\"/profiles/\".concat(currentUser===null||currentUser===void 0?void 0:currentUser.profile_id),children:/*#__PURE__*/_jsx(Avatar,{src:currentUser===null||currentUser===void 0?void 0:currentUser.profile_image,text:\"Profile\",height:40})})]});var loggedOutIcons=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NavLink,{className:styles.NavLink,activeClassName:styles.Active,to:\"/signin\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-in-alt\"}),\"Sign in\"]}),/*#__PURE__*/_jsxs(NavLink,{to:\"/signup\",className:styles.NavLink,activeClassName:styles.Active,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-plus\"}),\"Sign up\"]})]});return/*#__PURE__*/_jsx(Navbar,{expanded:expanded,className:styles.NavBar,expand:\"md\",fixed:\"top\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(NavLink,{to:\"/\",children:/*#__PURE__*/_jsx(Navbar.Brand,{children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\",height:\"45\"})})}),currentUser&&addPostIcon,/*#__PURE__*/_jsx(Navbar.Toggle,{ref:ref,onClick:function onClick(){return setExpanded(!expanded);},\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"basic-navbar-nav\",children:/*#__PURE__*/_jsxs(Nav,{className:\"ml-auto text-left\",children:[/*#__PURE__*/_jsxs(NavLink,{exact:true,className:styles.NavLink,activeClassName:styles.Active,to:\"/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home\"}),\"Home\"]}),currentUser?loggedInIcons:loggedOutIcons]})})]})});};export default NavBar;","map":{"version":3,"names":["React","Navbar","Container","Nav","logo","styles","NavLink","useCurrentUser","useSetCurrentUser","Avatar","axios","useClickOutsideToggle","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NavBar","currentUser","setCurrentUser","_useClickOutsideToggl","expanded","setExpanded","ref","handleSignOut","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","t0","console","log","stop","apply","arguments","addPostIcon","className","activeClassName","Active","to","children","loggedInIcons","onClick","concat","profile_id","src","profile_image","text","height","loggedOutIcons","expand","fixed","Brand","alt","Toggle","Collapse","id","exact"],"sources":["/workspace/api-django/project/frontend/src/components/NavBar.js"],"sourcesContent":["import React from \"react\";\nimport { Navbar, Container, Nav } from \"react-bootstrap\";\nimport logo from \"../assets/logo.png\";\nimport styles from \"../styles/NavBar.module.css\";\nimport { NavLink } from \"react-router-dom\";\nimport {\n  useCurrentUser,\n  useSetCurrentUser,\n} from \"../contexts/CurrentUserContext\";\nimport Avatar from \"./Avatar\";\nimport axios from \"axios\";\nimport useClickOutsideToggle from \"../hooks/useClickOutsideToggle\";\n\nconst NavBar = () => {\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useSetCurrentUser();\n\n  const { expanded, setExpanded, ref } = useClickOutsideToggle();\n\n  const handleSignOut = async () => {\n    try {\n      await axios.post(\"dj-rest-auth/logout/\");\n      setCurrentUser(null);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const addPostIcon = (\n    <NavLink\n      className={styles.NavLink}\n      activeClassName={styles.Active}\n      to=\"/posts/create\"\n    >\n      <i className=\"far fa-plus-square\"></i>Add post\n    </NavLink>\n  );\n  const loggedInIcons = (\n    <>\n      <NavLink\n        className={styles.NavLink}\n        activeClassName={styles.Active}\n        to=\"/feed\"\n      >\n        <i className=\"fas fa-stream\"></i>Feed\n      </NavLink>\n      <NavLink\n        className={styles.NavLink}\n        activeClassName={styles.Active}\n        to=\"/liked\"\n      >\n        <i className=\"fas fa-heart\"></i>Liked\n      </NavLink>\n      <NavLink className={styles.NavLink} to=\"/\" onClick={handleSignOut}>\n        <i className=\"fas fa-sign-out-alt\"></i>Sign out\n      </NavLink>\n      <NavLink\n        className={styles.NavLink}\n        to={`/profiles/${currentUser?.profile_id}`}\n      >\n        <Avatar src={currentUser?.profile_image} text=\"Profile\" height={40} />\n      </NavLink>\n    </>\n  );\n  const loggedOutIcons = (\n    <>\n      <NavLink\n        className={styles.NavLink}\n        activeClassName={styles.Active}\n        to=\"/signin\"\n      >\n        <i className=\"fas fa-sign-in-alt\"></i>Sign in\n      </NavLink>\n      <NavLink\n        to=\"/signup\"\n        className={styles.NavLink}\n        activeClassName={styles.Active}\n      >\n        <i className=\"fas fa-user-plus\"></i>Sign up\n      </NavLink>\n    </>\n  );\n\n  return (\n    <Navbar\n      expanded={expanded}\n      className={styles.NavBar}\n      expand=\"md\"\n      fixed=\"top\"\n    >\n      <Container>\n        <NavLink to=\"/\">\n          <Navbar.Brand>\n            <img src={logo} alt=\"logo\" height=\"45\" />\n          </Navbar.Brand>\n        </NavLink>\n        {currentUser && addPostIcon}\n        <Navbar.Toggle\n          ref={ref}\n          onClick={() => setExpanded(!expanded)}\n          aria-controls=\"basic-navbar-nav\"\n        />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"ml-auto text-left\">\n            <NavLink\n              exact\n              className={styles.NavLink}\n              activeClassName={styles.Active}\n              to=\"/\"\n            >\n              <i className=\"fas fa-home\"></i>Home\n            </NavLink>\n\n            {currentUser ? loggedInIcons : loggedOutIcons}\n          </Nav>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n};\n\nexport default NavBar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}